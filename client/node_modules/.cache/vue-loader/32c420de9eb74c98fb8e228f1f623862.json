{"remainingRequest":"C:\\Users\\Liam's PC\\Desktop\\dentist-client\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Liam's PC\\Desktop\\dentist-client\\client\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Liam's PC\\Desktop\\dentist-client\\client\\src\\App.vue","mtime":1670943543987},{"path":"C:\\Users\\Liam's PC\\Desktop\\dentist-client\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670942236694},{"path":"C:\\Users\\Liam's PC\\Desktop\\dentist-client\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1670942246112}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTG9nbyBmcm9tICcuL2NvbXBvbmVudHMvTG9nby52dWUnDQppbXBvcnQgbXF0dCBmcm9tICdtcXR0Jw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBMb2dvX0RlbnRpc3RpbW86IExvZ28NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbWVzc2FnZTogJ25vbmUnLA0KICAgICAgY29ubmVjdGlvbjogew0KICAgICAgICBwcm90b2NvbDogJ3dzcycsDQogICAgICAgIGhvc3Q6ICdlMzNlNDFjMjg5YWQ0YWM2OWFlNWVmNjBmNDU2ZTljMy5zMi5ldS5oaXZlbXEuY2xvdWQnLA0KICAgICAgICBwb3J0OiA4ODg0LA0KICAgICAgICBlbmRwb2ludDogJy9tcXR0JywNCiAgICAgICAga2VlcGFsaXZlOiA2MCwNCiAgICAgICAgY2xlYW46IHRydWUsDQogICAgICAgIGNvbm5lY3RUaW1lb3V0OiA0MDAwLA0KICAgICAgICByZWNvbm5lY3RQZXJpb2Q6IDQwMDAsDQogICAgICAgIGNsaWVudElkOiBgbXF0dF8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDMpfWAsDQogICAgICAgIHVzZXJuYW1lOiAnZ3JvdXA2X2RlbnRpc3RpbW8nLA0KICAgICAgICBwYXNzd29yZDogJ2RlbnRpc3RpbW8xMjMhJw0KICAgICAgfSwNCiAgICAgIHN1YnNjcmlwdGlvbjogew0KICAgICAgICB0b3BpYzogJ2RlbnRpc3RpbW8vZGVudGlzdENsaWVudC90ZXN0JywNCiAgICAgICAgcW9zOiAwDQogICAgICB9LA0KICAgICAgcHVibGlzaDogew0KICAgICAgICB0b3BpYzogJ2RlbnRpc3RpbW8vZGVudGlzdENsaWVudC90ZXN0JywNCiAgICAgICAgcW9zOiAwLA0KICAgICAgICBwYXlsb2FkOiAneyJ1c2VyaWQiOiA2NzIzLCAicmVxdWVzdGlkIjogNTA5ODEsICJkZW50aXN0aWQiOiA0Nzc2MTIzMjE3MjZ9Jw0KICAgICAgfSwNCiAgICAgIHJlY2VpdmVOZXdzOiAnJywNCiAgICAgIHFvc0xpc3Q6IFswLCAxLCAyXSwNCiAgICAgIGNsaWVudDogew0KICAgICAgICBjb25uZWN0ZWQ6IGZhbHNlDQogICAgICB9LA0KICAgICAgc3Vic2NyaWJlU3VjY2VzczogZmFsc2UsDQogICAgICBjb25uZWN0aW5nOiBmYWxzZSwNCiAgICAgIHJldHJ5VGltZXM6IDANCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5jcmVhdGVDb25uZWN0aW9uKCkNCiAgICB0aGlzLmRvU3Vic2NyaWJlKCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGluaXREYXRhKCkgew0KICAgICAgdGhpcy5jbGllbnQgPSB7DQogICAgICAgIGNvbm5lY3RlZDogZmFsc2UNCiAgICAgIH0NCiAgICAgIHRoaXMucmV0cnlUaW1lcyA9IDANCiAgICAgIHRoaXMuY29ubmVjdGluZyA9IGZhbHNlDQogICAgICB0aGlzLnN1YnNjcmliZVN1Y2Nlc3MgPSBmYWxzZQ0KICAgIH0sDQogICAgaGFuZGxlT25SZUNvbm5lY3QoKSB7DQogICAgICB0aGlzLnJldHJ5VGltZXMgKz0gMQ0KICAgICAgaWYgKHRoaXMucmV0cnlUaW1lcyA+IDUpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICB0aGlzLmNsaWVudC5lbmQoKQ0KICAgICAgICAgIHRoaXMuaW5pdERhdGEoKQ0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ0Nvbm5lY3Rpb24gbWF4UmVjb25uZWN0VGltZXMgbGltaXQsIHN0b3AgcmV0cnknKQ0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIC8vIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IudG9TdHJpbmcoKSkNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlQ29ubmVjdGlvbigpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIHRoaXMuY29ubmVjdGluZyA9IHRydWUNCiAgICAgICAgY29uc3QgeyBwcm90b2NvbCwgaG9zdCwgcG9ydCwgZW5kcG9pbnQsIC4uLm9wdGlvbnMgfSA9IHRoaXMuY29ubmVjdGlvbg0KICAgICAgICBjb25zdCBjb25uZWN0VXJsID0gYCR7cHJvdG9jb2x9Oi8vJHtob3N0fToke3BvcnR9JHtlbmRwb2ludH1gDQogICAgICAgIGNvbnNvbGUubG9nKGNvbm5lY3RVcmwpDQogICAgICAgIHRoaXMuY2xpZW50ID0gbXF0dC5jb25uZWN0KGNvbm5lY3RVcmwsIG9wdGlvbnMpDQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2xpZW50KQ0KICAgICAgICBpZiAodGhpcy5jbGllbnQub24pIHsNCiAgICAgICAgICB0aGlzLmNsaWVudC5vbignY29ubmVjdCcsICgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuY29ubmVjdGluZyA9IGZhbHNlDQogICAgICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiBzdWNjZWVkZWQhJykNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMuY2xpZW50Lm9uKCdyZWNvbm5lY3QnLCB0aGlzLmhhbmRsZU9uUmVDb25uZWN0KQ0KICAgICAgICAgIHRoaXMuY2xpZW50Lm9uKCdlcnJvcicsIChlcnJvcikgPT4gew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3Rpb24gZmFpbGVkJywgZXJyb3IpDQogICAgICAgICAgfSkNCiAgICAgICAgICB0aGlzLmNsaWVudC5vbignbWVzc2FnZScsICh0b3BpYywgbWVzc2FnZSkgPT4gew0KICAgICAgICAgICAgdGhpcy5yZWNlaXZlTmV3cyA9IG1lc3NhZ2UNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZWNlaXZlZCBtZXNzYWdlICR7bWVzc2FnZX0gZnJvbSB0b3BpYyAke3RvcGljfWApDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgdGhpcy5jb25uZWN0aW5nID0gZmFsc2UNCiAgICAgICAgY29uc29sZS5sb2coJ21xdHQuY29ubmVjdCBlcnJvcicsIGVycm9yKQ0KICAgICAgfQ0KICAgICAgY29uc29sZS5sb2coJ2hlbGxvJykNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2xpZW50KQ0KICAgIH0sDQogICAgZG9TdWJzY3JpYmUoKSB7DQogICAgICBjb25zdCB7IHRvcGljLCBxb3MgfSA9IHRoaXMuc3Vic2NyaXB0aW9uDQogICAgICB0aGlzLmNsaWVudC5zdWJzY3JpYmUodG9waWMsIHsgcW9zIH0sIChlcnJvciwgcmVzKSA9PiB7DQogICAgICAgIGlmIChlcnJvcikgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWJzY3JpYmUgdG8gdG9waWNzIGVycm9yJywgZXJyb3IpDQogICAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5zdWJzY3JpYmVTdWNjZXNzID0gdHJ1ZQ0KICAgICAgICBjb25zb2xlLmxvZygnU3Vic2NyaWJlIHRvIHRvcGljcyByZXMnLCByZXMpDQogICAgICB9KQ0KICAgIH0sDQogICAgZG9VblN1YnNjcmliZSgpIHsNCiAgICAgIGNvbnN0IHsgdG9waWMgfSA9IHRoaXMuc3Vic2NyaXB0aW9uDQogICAgICB0aGlzLmNsaWVudC51bnN1YnNjcmliZSh0b3BpYywgZXJyb3IgPT4gew0KICAgICAgICBpZiAoZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnVW5zdWJzY3JpYmUgZXJyb3InLCBlcnJvcikNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGRvUHVibGlzaCgpIHsNCiAgICAgIGNvbnN0IHsgdG9waWMsIHFvcywgcGF5bG9hZCB9ID0gdGhpcy5wdWJsaXNoDQogICAgICB0aGlzLmNsaWVudC5wdWJsaXNoKHRvcGljLCBwYXlsb2FkLCB7IHFvcyB9LCBlcnJvciA9PiB7DQogICAgICAgIGlmIChlcnJvcikgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdQdWJsaXNoIGVycm9yJywgZXJyb3IpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBkZXN0cm95Q29ubmVjdGlvbigpIHsNCiAgICAgIGlmICh0aGlzLmNsaWVudC5jb25uZWN0ZWQpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICB0aGlzLmNsaWVudC5lbmQoZmFsc2UsICgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuaW5pdERhdGEoKQ0KICAgICAgICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBkaXNjb25uZWN0ZWQhJykNCiAgICAgICAgICB9KQ0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdEaXNjb25uZWN0IGZhaWxlZCcsIGVycm9yLnRvU3RyaW5nKCkpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <Logo_Dentistimo/>\r\n    <div>\r\n      <div>\r\n        <b-navbar toggleable=\"lg\" type=\"dark\" variant=\"dark\">\r\n          <b-navbar-brand href=\"/\">Dentistimo</b-navbar-brand>\r\n          <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\r\n          <b-collapse id=\"nav-collapse\" is-nav>\r\n            <b-navbar-nav>\r\n              <b-nav-item href=\"/appointments\">Appointments</b-nav-item>\r\n            </b-navbar-nav>\r\n            <b-navbar-nav class=\"ml-auto\">\r\n              <b-navbar-nav>\r\n                <!-- TODO! If logged in change to logout button instead -->\r\n                  <b-nav-item href=\"/login\">Login</b-nav-item>\r\n                  <b-nav-item href=\"/login\">login</b-nav-item>\r\n                </b-navbar-nav>\r\n              <b-nav-item-dropdown right>\r\n                <template #button-content>\r\n                  <em>User</em>\r\n                </template>\r\n                <b-dropdown-item href=\"/userProfile\">User Profile</b-dropdown-item>\r\n                <b-dropdown-item href=\"/\">Sign Out</b-dropdown-item>\r\n              </b-nav-item-dropdown>\r\n            </b-navbar-nav>\r\n          </b-collapse>\r\n        </b-navbar>\r\n      </div>\r\n    </div>\r\n    <router-view />\r\n  <div id=\"footer\">\r\n      <p class=\"copy\">Â© 2022 Dentistimo</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Logo from './components/Logo.vue'\r\nimport mqtt from 'mqtt'\r\n\r\nexport default {\r\n  components: {\r\n    Logo_Dentistimo: Logo\r\n  },\r\n  data() {\r\n    return {\r\n      message: 'none',\r\n      connection: {\r\n        protocol: 'wss',\r\n        host: 'e33e41c289ad4ac69ae5ef60f456e9c3.s2.eu.hivemq.cloud',\r\n        port: 8884,\r\n        endpoint: '/mqtt',\r\n        keepalive: 60,\r\n        clean: true,\r\n        connectTimeout: 4000,\r\n        reconnectPeriod: 4000,\r\n        clientId: `mqtt_${Math.random().toString(16).slice(3)}`,\r\n        username: 'group6_dentistimo',\r\n        password: 'dentistimo123!'\r\n      },\r\n      subscription: {\r\n        topic: 'dentistimo/dentistClient/test',\r\n        qos: 0\r\n      },\r\n      publish: {\r\n        topic: 'dentistimo/dentistClient/test',\r\n        qos: 0,\r\n        payload: '{\"userid\": 6723, \"requestid\": 50981, \"dentistid\": 477612321726}'\r\n      },\r\n      receiveNews: '',\r\n      qosList: [0, 1, 2],\r\n      client: {\r\n        connected: false\r\n      },\r\n      subscribeSuccess: false,\r\n      connecting: false,\r\n      retryTimes: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    this.createConnection()\r\n    this.doSubscribe()\r\n  },\r\n  methods: {\r\n    initData() {\r\n      this.client = {\r\n        connected: false\r\n      }\r\n      this.retryTimes = 0\r\n      this.connecting = false\r\n      this.subscribeSuccess = false\r\n    },\r\n    handleOnReConnect() {\r\n      this.retryTimes += 1\r\n      if (this.retryTimes > 5) {\r\n        try {\r\n          this.client.end()\r\n          this.initData()\r\n          this.$message.error('Connection maxReconnectTimes limit, stop retry')\r\n        } catch (error) {\r\n          // this.$message.error(error.toString())\r\n          console.log(error)\r\n        }\r\n      }\r\n    },\r\n    createConnection() {\r\n      try {\r\n        this.connecting = true\r\n        const { protocol, host, port, endpoint, ...options } = this.connection\r\n        const connectUrl = `${protocol}://${host}:${port}${endpoint}`\r\n        console.log(connectUrl)\r\n        this.client = mqtt.connect(connectUrl, options)\r\n        console.log(this.client)\r\n        if (this.client.on) {\r\n          this.client.on('connect', () => {\r\n            this.connecting = false\r\n            console.log('Connection succeeded!')\r\n          })\r\n          this.client.on('reconnect', this.handleOnReConnect)\r\n          this.client.on('error', (error) => {\r\n            console.log('Connection failed', error)\r\n          })\r\n          this.client.on('message', (topic, message) => {\r\n            this.receiveNews = message\r\n            console.log(`Received message ${message} from topic ${topic}`)\r\n          })\r\n        }\r\n      } catch (error) {\r\n        this.connecting = false\r\n        console.log('mqtt.connect error', error)\r\n      }\r\n      console.log('hello')\r\n      console.log(this.client)\r\n    },\r\n    doSubscribe() {\r\n      const { topic, qos } = this.subscription\r\n      this.client.subscribe(topic, { qos }, (error, res) => {\r\n        if (error) {\r\n          console.log('Subscribe to topics error', error)\r\n          return\r\n        }\r\n        this.subscribeSuccess = true\r\n        console.log('Subscribe to topics res', res)\r\n      })\r\n    },\r\n    doUnSubscribe() {\r\n      const { topic } = this.subscription\r\n      this.client.unsubscribe(topic, error => {\r\n        if (error) {\r\n          console.log('Unsubscribe error', error)\r\n        }\r\n      })\r\n    },\r\n    doPublish() {\r\n      const { topic, qos, payload } = this.publish\r\n      this.client.publish(topic, payload, { qos }, error => {\r\n        if (error) {\r\n          console.log('Publish error', error)\r\n        }\r\n      })\r\n    },\r\n    destroyConnection() {\r\n      if (this.client.connected) {\r\n        try {\r\n          this.client.end(false, () => {\r\n            this.initData()\r\n            console.log('Successfully disconnected!')\r\n          })\r\n        } catch (error) {\r\n          console.log('Disconnect failed', error.toString())\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n  #footer {\r\n  position: absolute;\r\n  bottom: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n\r\n</style>\r\n"]}]}