{"remainingRequest":"C:\\Users\\Liam's PC\\Desktop\\dentist-client\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Liam's PC\\Desktop\\dentist-client\\client\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Liam's PC\\Desktop\\dentist-client\\client\\src\\App.vue","mtime":1670960858715},{"path":"C:\\Users\\Liam's PC\\Desktop\\dentist-client\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670944875280},{"path":"C:\\Users\\Liam's PC\\Desktop\\dentist-client\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1670944884203}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTG9nbyBmcm9tICcuL2NvbXBvbmVudHMvTG9nby52dWUnDQppbXBvcnQgbXF0dCBmcm9tICdtcXR0Jw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBMb2dvX0RlbnRpc3RpbW86IExvZ28NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbWVzc2FnZTogJ25vbmUnLA0KICAgICAgY29ubmVjdGlvbjogew0KICAgICAgICBwcm90b2NvbDogJ3dzcycsDQogICAgICAgIGhvc3Q6ICdlMzNlNDFjMjg5YWQ0YWM2OWFlNWVmNjBmNDU2ZTljMy5zMi5ldS5oaXZlbXEuY2xvdWQnLA0KICAgICAgICBwb3J0OiA4ODg0LA0KICAgICAgICBlbmRwb2ludDogJy9tcXR0JywNCiAgICAgICAga2VlcGFsaXZlOiA2MCwNCiAgICAgICAgY2xlYW46IHRydWUsDQogICAgICAgIGNvbm5lY3RUaW1lb3V0OiA0MDAwLA0KICAgICAgICByZWNvbm5lY3RQZXJpb2Q6IDQwMDAsDQogICAgICAgIGNsaWVudElkOiBgbXF0dF8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDMpfWAsDQogICAgICAgIHVzZXJuYW1lOiAnZ3JvdXA2X2RlbnRpc3RpbW8nLA0KICAgICAgICBwYXNzd29yZDogJ2RlbnRpc3RpbW8xMjMhJw0KICAgICAgfSwNCiAgICAgIHN1YnNjcmlwdGlvbjogew0KICAgICAgICB0b3BpYzogJ2RlbnRpc3RpbW8vZGVudGlzdENsaWVudC90ZXN0JywNCiAgICAgICAgcW9zOiAwDQogICAgICB9LA0KICAgICAgcHVibGlzaDogew0KICAgICAgICB0b3BpYzogJ2RlbnRpc3RpbW8vZGVudGlzdENsaWVudC90ZXN0JywNCiAgICAgICAgcW9zOiAwLA0KICAgICAgICBwYXlsb2FkOiAneyJ1c2VyaWQiOiA2NzIzLCAicmVxdWVzdGlkIjogNTA5ODEsICJkZW50aXN0aWQiOiA0Nzc2MTIzMjE3MjZ9Jw0KICAgICAgfSwNCiAgICAgIHJlY2VpdmVOZXdzOiAnJywNCiAgICAgIHFvc0xpc3Q6IFswLCAxLCAyXSwNCiAgICAgIGNsaWVudDogew0KICAgICAgICBjb25uZWN0ZWQ6IGZhbHNlDQogICAgICB9LA0KICAgICAgc3Vic2NyaWJlU3VjY2VzczogZmFsc2UsDQogICAgICBjb25uZWN0aW5nOiBmYWxzZSwNCiAgICAgIHJldHJ5VGltZXM6IDANCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgbXF0dC5jcmVhdGVDb25uZWN0aW9uKCkNCiAgICAvLyB0aGlzLmNyZWF0ZUNvbm5lY3Rpb24oKQ0KICAgIC8vIHRoaXMuZG9TdWJzY3JpYmUoKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaW5pdERhdGEoKSB7DQogICAgICB0aGlzLmNsaWVudCA9IHsNCiAgICAgICAgY29ubmVjdGVkOiBmYWxzZQ0KICAgICAgfQ0KICAgICAgdGhpcy5yZXRyeVRpbWVzID0gMA0KICAgICAgdGhpcy5jb25uZWN0aW5nID0gZmFsc2UNCiAgICAgIHRoaXMuc3Vic2NyaWJlU3VjY2VzcyA9IGZhbHNlDQogICAgfSwNCiAgICBoYW5kbGVPblJlQ29ubmVjdCgpIHsNCiAgICAgIHRoaXMucmV0cnlUaW1lcyArPSAxDQogICAgICBpZiAodGhpcy5yZXRyeVRpbWVzID4gNSkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIHRoaXMuY2xpZW50LmVuZCgpDQogICAgICAgICAgdGhpcy5pbml0RGF0YSgpDQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignQ29ubmVjdGlvbiBtYXhSZWNvbm5lY3RUaW1lcyBsaW1pdCwgc3RvcCByZXRyeScpDQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5lcnJvcihlcnJvci50b1N0cmluZygpKQ0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVDb25uZWN0aW9uKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgdGhpcy5jb25uZWN0aW5nID0gdHJ1ZQ0KICAgICAgICBjb25zdCB7IHByb3RvY29sLCBob3N0LCBwb3J0LCBlbmRwb2ludCwgLi4ub3B0aW9ucyB9ID0gdGhpcy5jb25uZWN0aW9uDQogICAgICAgIGNvbnN0IGNvbm5lY3RVcmwgPSBgJHtwcm90b2NvbH06Ly8ke2hvc3R9OiR7cG9ydH0ke2VuZHBvaW50fWANCiAgICAgICAgY29uc29sZS5sb2coY29ubmVjdFVybCkNCiAgICAgICAgdGhpcy5jbGllbnQgPSBtcXR0LmNvbm5lY3QoY29ubmVjdFVybCwgb3B0aW9ucykNCiAgICAgICAgY29uc29sZS5sb2codGhpcy5jbGllbnQpDQogICAgICAgIGlmICh0aGlzLmNsaWVudC5vbikgew0KICAgICAgICAgIHRoaXMuY2xpZW50Lm9uKCdjb25uZWN0JywgKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5jb25uZWN0aW5nID0gZmFsc2UNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW9uIHN1Y2NlZWRlZCEnKQ0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy5jbGllbnQub24oJ3JlY29ubmVjdCcsIHRoaXMuaGFuZGxlT25SZUNvbm5lY3QpDQogICAgICAgICAgdGhpcy5jbGllbnQub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiBmYWlsZWQnLCBlcnJvcikNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMuY2xpZW50Lm9uKCdtZXNzYWdlJywgKHRvcGljLCBtZXNzYWdlKSA9PiB7DQogICAgICAgICAgICB0aGlzLnJlY2VpdmVOZXdzID0gbWVzc2FnZQ0KICAgICAgICAgICAgY29uc29sZS5sb2coYFJlY2VpdmVkIG1lc3NhZ2UgJHttZXNzYWdlfSBmcm9tIHRvcGljICR7dG9waWN9YCkNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICB0aGlzLmNvbm5lY3RpbmcgPSBmYWxzZQ0KICAgICAgICBjb25zb2xlLmxvZygnbXF0dC5jb25uZWN0IGVycm9yJywgZXJyb3IpDQogICAgICB9DQogICAgICBjb25zb2xlLmxvZygnaGVsbG8nKSAvLyBjb25zb2xlLmxvZyBzYXlzIGhlbGxvDQogICAgICBjb25zb2xlLmxvZyh0aGlzLmNsaWVudCkNCiAgICB9LA0KICAgIGRvU3Vic2NyaWJlKCkgew0KICAgICAgY29uc3QgeyB0b3BpYywgcW9zIH0gPSB0aGlzLnN1YnNjcmlwdGlvbg0KICAgICAgdGhpcy5jbGllbnQuc3Vic2NyaWJlKHRvcGljLCB7IHFvcyB9LCAoZXJyb3IsIHJlcykgPT4gew0KICAgICAgICBpZiAoZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnU3Vic2NyaWJlIHRvIHRvcGljcyBlcnJvcicsIGVycm9yKQ0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICAgIHRoaXMuc3Vic2NyaWJlU3VjY2VzcyA9IHRydWUNCiAgICAgICAgY29uc29sZS5sb2coJ1N1YnNjcmliZSB0byB0b3BpY3MgcmVzJywgcmVzKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGdldENsaWVudCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmNsaWVudA0KICAgIH0sDQogICAgZG9VblN1YnNjcmliZSgpIHsNCiAgICAgIGNvbnN0IHsgdG9waWMgfSA9IHRoaXMuc3Vic2NyaXB0aW9uDQogICAgICB0aGlzLmNsaWVudC51bnN1YnNjcmliZSh0b3BpYywgZXJyb3IgPT4gew0KICAgICAgICBpZiAoZXJyb3IpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnVW5zdWJzY3JpYmUgZXJyb3InLCBlcnJvcikNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGRvUHVibGlzaCh7IHRvcGljLCBxb3MsIHBheWxvYWQgfSkgew0KICAgICAgLy8gY29uc3QgeyB0b3BpYywgcW9zLCBwYXlsb2FkIH0gPSB0aGlzLnB1Ymxpc2gNCiAgICAgIHRoaXMuY2xpZW50LnB1Ymxpc2godG9waWMsIHBheWxvYWQsIHsgcW9zIH0sIGVycm9yID0+IHsNCiAgICAgICAgaWYgKGVycm9yKSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ1B1Ymxpc2ggZXJyb3InLCBlcnJvcikNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGRlc3Ryb3lDb25uZWN0aW9uKCkgew0KICAgICAgaWYgKHRoaXMuY2xpZW50LmNvbm5lY3RlZCkgew0KICAgICAgICB0cnkgew0KICAgICAgICAgIHRoaXMuY2xpZW50LmVuZChmYWxzZSwgKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5pbml0RGF0YSgpDQogICAgICAgICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGRpc2Nvbm5lY3RlZCEnKQ0KICAgICAgICAgIH0pDQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ0Rpc2Nvbm5lY3QgZmFpbGVkJywgZXJyb3IudG9TdHJpbmcoKSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfQ0KDQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <Logo_Dentistimo/>\r\n    <div>\r\n      <div>\r\n        <b-navbar toggleable=\"lg\" type=\"dark\" variant=\"dark\">\r\n          <b-navbar-brand href=\"/\">Dentistimo</b-navbar-brand>\r\n          <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\r\n          <b-collapse id=\"nav-collapse\" is-nav>\r\n            <b-navbar-nav>\r\n              <b-nav-item href=\"/appointments\">Appointments</b-nav-item>\r\n            </b-navbar-nav>\r\n            <b-navbar-nav class=\"ml-auto\">\r\n              <b-navbar-nav>\r\n                <!-- TODO! If logged in change to logout button instead -->\r\n                  <b-nav-item href=\"/login\">Login</b-nav-item>\r\n                  <b-nav-item href=\"/register\">register</b-nav-item>\r\n                </b-navbar-nav>\r\n              <b-nav-item-dropdown right>\r\n                <template #button-content>\r\n                  <em>User</em>\r\n                </template>\r\n                <b-dropdown-item href=\"/userProfile\">User Profile</b-dropdown-item>\r\n                <b-dropdown-item href=\"/\">Sign Out</b-dropdown-item>\r\n              </b-nav-item-dropdown>\r\n            </b-navbar-nav>\r\n          </b-collapse>\r\n        </b-navbar>\r\n      </div>\r\n    </div>\r\n    <router-view />\r\n  <div id=\"footer\">\r\n      <p class=\"copy\">Â© 2022 Dentistimo</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Logo from './components/Logo.vue'\r\nimport mqtt from 'mqtt'\r\n\r\nexport default {\r\n  components: {\r\n    Logo_Dentistimo: Logo\r\n  },\r\n  data() {\r\n    return {\r\n      message: 'none',\r\n      connection: {\r\n        protocol: 'wss',\r\n        host: 'e33e41c289ad4ac69ae5ef60f456e9c3.s2.eu.hivemq.cloud',\r\n        port: 8884,\r\n        endpoint: '/mqtt',\r\n        keepalive: 60,\r\n        clean: true,\r\n        connectTimeout: 4000,\r\n        reconnectPeriod: 4000,\r\n        clientId: `mqtt_${Math.random().toString(16).slice(3)}`,\r\n        username: 'group6_dentistimo',\r\n        password: 'dentistimo123!'\r\n      },\r\n      subscription: {\r\n        topic: 'dentistimo/dentistClient/test',\r\n        qos: 0\r\n      },\r\n      publish: {\r\n        topic: 'dentistimo/dentistClient/test',\r\n        qos: 0,\r\n        payload: '{\"userid\": 6723, \"requestid\": 50981, \"dentistid\": 477612321726}'\r\n      },\r\n      receiveNews: '',\r\n      qosList: [0, 1, 2],\r\n      client: {\r\n        connected: false\r\n      },\r\n      subscribeSuccess: false,\r\n      connecting: false,\r\n      retryTimes: 0\r\n    }\r\n  },\r\n  mounted() {\r\n    mqtt.createConnection()\r\n    // this.createConnection()\r\n    // this.doSubscribe()\r\n  },\r\n  methods: {\r\n    initData() {\r\n      this.client = {\r\n        connected: false\r\n      }\r\n      this.retryTimes = 0\r\n      this.connecting = false\r\n      this.subscribeSuccess = false\r\n    },\r\n    handleOnReConnect() {\r\n      this.retryTimes += 1\r\n      if (this.retryTimes > 5) {\r\n        try {\r\n          this.client.end()\r\n          this.initData()\r\n          this.$message.error('Connection maxReconnectTimes limit, stop retry')\r\n        } catch (error) {\r\n          // this.$message.error(error.toString())\r\n          console.log(error)\r\n        }\r\n      }\r\n    },\r\n    createConnection() {\r\n      try {\r\n        this.connecting = true\r\n        const { protocol, host, port, endpoint, ...options } = this.connection\r\n        const connectUrl = `${protocol}://${host}:${port}${endpoint}`\r\n        console.log(connectUrl)\r\n        this.client = mqtt.connect(connectUrl, options)\r\n        console.log(this.client)\r\n        if (this.client.on) {\r\n          this.client.on('connect', () => {\r\n            this.connecting = false\r\n            console.log('Connection succeeded!')\r\n          })\r\n          this.client.on('reconnect', this.handleOnReConnect)\r\n          this.client.on('error', (error) => {\r\n            console.log('Connection failed', error)\r\n          })\r\n          this.client.on('message', (topic, message) => {\r\n            this.receiveNews = message\r\n            console.log(`Received message ${message} from topic ${topic}`)\r\n          })\r\n        }\r\n      } catch (error) {\r\n        this.connecting = false\r\n        console.log('mqtt.connect error', error)\r\n      }\r\n      console.log('hello') // console.log says hello\r\n      console.log(this.client)\r\n    },\r\n    doSubscribe() {\r\n      const { topic, qos } = this.subscription\r\n      this.client.subscribe(topic, { qos }, (error, res) => {\r\n        if (error) {\r\n          console.log('Subscribe to topics error', error)\r\n          return\r\n        }\r\n        this.subscribeSuccess = true\r\n        console.log('Subscribe to topics res', res)\r\n      })\r\n    },\r\n    getClient() {\r\n      return this.client\r\n    },\r\n    doUnSubscribe() {\r\n      const { topic } = this.subscription\r\n      this.client.unsubscribe(topic, error => {\r\n        if (error) {\r\n          console.log('Unsubscribe error', error)\r\n        }\r\n      })\r\n    },\r\n    doPublish({ topic, qos, payload }) {\r\n      // const { topic, qos, payload } = this.publish\r\n      this.client.publish(topic, payload, { qos }, error => {\r\n        if (error) {\r\n          console.log('Publish error', error)\r\n        }\r\n      })\r\n    },\r\n    destroyConnection() {\r\n      if (this.client.connected) {\r\n        try {\r\n          this.client.end(false, () => {\r\n            this.initData()\r\n            console.log('Successfully disconnected!')\r\n          })\r\n        } catch (error) {\r\n          console.log('Disconnect failed', error.toString())\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n  #footer {\r\n  position: absolute;\r\n  bottom: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n\r\n</style>\r\n"]}]}